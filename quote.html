<section id="quote">
  <h2 class="section-title" style="color:#fff;">Get a Free Quote</h2>
  <form id="quote-form" action="https://formspree.io/f/xqadgpbb" method="POST">
    <!-- CC both emails -->
    <input type="hidden" name="_cc" value="boe@easyhanson.net,Brsnt3@gmail.com">
    <!-- Optional: redirect to a thank you page -->
    <input type="hidden" name="_subject" value="New Junk Removal Quote Request">
    <input type="text" name="name" placeholder="Full Name" required>
    <input type="email" name="email" placeholder="Email" required>
    <input type="text" name="phone" placeholder="Phone Number" required>
    <input type="text" name="service" id="service" placeholder="Service" required readonly>
    <input type="text" name="price" id="price" placeholder="Price" required readonly>
    <textarea name="message" rows="5" placeholder="Additional Details (optional)"></textarea>
    <button type="submit">Submit</button>
  </form>
  <p id="form-success" style="display:none;color:#4caf50;margin-top:15px;font-weight:bold;">Thank you! Your quote request has been sent.</p>
  <p id="form-error" style="display:none;color:red;margin-top:15px;font-weight:bold;">Oops! Something went wrong. Please try again.</p>
</section>

<script>
// Auto-fill service and price from URL
const params = new URLSearchParams(window.location.search);
const service = params.get('service');
const price = params.get('price');
if(service) document.getElementById('service').value = service.replace(/\+/g,' ');
if(price) document.getElementById('price').value = price.replace(/\+/g,' ');

// Handle submission via AJAX to show success/error without page reload
const form = document.getElementById('quote-form');
form.addEventListener('submit', function(e){
  e.preventDefault();
  const formData = new FormData(form);
  fetch(form.action, {
    method: 'POST',
    body: formData,
    headers: { 'Accept': 'application/json' }
  }).then(response => {
    if (response.ok) {
      form.reset();
      document.getElementById('form-success').style.display = 'block';
      document.getElementById('form-error').style.display = 'none';
    } else {
      document.getElementById('form-success').style.display = 'none';
      document.getElementById('form-error').style.display = 'block';
    }
  }).catch(() => {
    document.getElementById('form-success').style.display = 'none';
    document.getElementById('form-error').style.display = 'block';
  });
});
</script>
