<form id="quote-form" action="https://formspree.io/f/xqadgpbb" method="POST">
  <input type="hidden" name="_cc" value="boe@easyhanson.net,Brsnt3@gmail.com">
  <input type="hidden" name="_subject" value="New Junk Removal Quote Request">
  
  <input type="text" name="name" placeholder="Full Name" required>
  <input type="email" name="email" placeholder="Email" required>
  <input type="text" name="phone" placeholder="Phone Number" required>

  <!-- Hidden fields to ensure Formspree always gets them -->
  <input type="hidden" name="service" id="hidden-service">
  <input type="hidden" name="price" id="hidden-price">

  <!-- Visible fields for user -->
  <input type="text" id="visible-service" placeholder="Service" readonly>
  <input type="text" id="visible-price" placeholder="Price" readonly>

  <textarea name="message" rows="5" placeholder="Additional Details (optional)"></textarea>
  <button type="submit">Submit</button>
</form>

<script>
// Auto-fill from URL parameters
const params = new URLSearchParams(window.location.search);
const service = params.get('service') ? params.get('service').replace(/\+/g,' ') : '';
const price = params.get('price') ? params.get('price').replace(/\+/g,' ') : '';

// Fill both hidden fields (Formspree) and visible fields
document.getElementById('hidden-service').value = service;
document.getElementById('hidden-price').value = price;
document.getElementById('visible-service').value = service;
document.getElementById('visible-price').value = price;

// AJAX submit for nice success/error message
const form = document.getElementById('quote-form');
form.addEventListener('submit', function(e){
  e.preventDefault();
  const formData = new FormData(form);
  fetch(form.action, { method:'POST', body:formData, headers:{'Accept':'application/json'} })
    .then(response => {
      if(response.ok){ alert('Quote request sent successfully!'); form.reset(); }
      else{ alert('Something went wrong. Please try again.'); }
    })
    .catch(()=>{ alert('Something went wrong. Please try again.'); });
});
</script>
